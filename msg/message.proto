syntax = "proto3";

package msg;

import "any.proto";

message ClientFunc {
    enum f {
        shoot = 0;
        behit = 1;
        die = 2;
        kick = 3;
        creatEntity = 4;
        destoryEntity = 5;
    } 
}

message ServerFunc {
    enum f {
        shoot = 0 ;
    }
}

message Vector3 {
    float x = 1;
    float y = 2;
    float z = 3;
}

message Rotation {
    float yaw = 1;
    float pitch = 2;
    float row = 3 ;
}

message Pos {
	string id = 1;
	Rotation rotation = 2;
    Vector3 vector3 =3;
}
message PosReply {
    bool ok = 1;
    string error = 2;
}
message Callin {
    string id = 1;
	ServerFunc.f method = 2;
    int64 stamp = 4;
    map<string,google.protobuf.Any> param = 3;
}

message Reply {
    string error = 1;
    ClientFunc.f cb = 2;
    map<string, google.protobuf.Any> param = 3;
    string To = 5;
    int64 stamp = 4;
    //repeated google.protobuf.Any param = 3;
}

message ClientStart {
    string id = 1;
    int64 stamp = 2;
}
service Rpc{
    rpc syncPostion(Pos) returns (PosReply){}
    rpc callServer(Callin) returns (Reply){} 
    rpc callClient(ClientStart ) returns (stream Reply){}
    rpc login(User) returns(UserInfo){}
    rpc createAccount(UserRegister) returns(UserRegisterInfo){}
}

message User {
    string Name = 1;
    string Pswd = 2;
}

message UserRegister {
    string Name = 1;
    string Pswd = 2;
    string Email = 3;
}

message UserRegisterInfo{
    string Error =1;
}

message UserInfo {
    string Id = 1;
    string Error = 2;
    Color Color =3;
    int32 Level = 4;
    int32 Exp = 5;
    Ability Ability = 6;
    map<string,Equipment> EquipmentMap = 7;
}

message Color {
    int32 R = 1;
    int32 G = 2;
    int32 B = 3;
}

message Equipment{
    string Name = 1;
    string Type =2 ;
    string Id = 3 ;
    Color Color = 4;
    Ability Ability =5;
    int32 CD =6;//Cool down time tick
    int32 Usable =7;
    int32 Inventory =8;
}

message Ability{
    int32 ATK = 1;
    int32 DEF = 2;
    float SPD = 3;
    int32 MP = 4;
    int32 MAKT = 5;
}
