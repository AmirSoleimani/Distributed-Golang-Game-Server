apiVersion: v1
kind: Pod
metadata:
  name: agent
  labels:
    app: gameserver
    type: agent
    id: ''
    agentToGamePort: ''
    clientToGamePort: '8080'
    clientToAgentPort: '50051'
spec:
  hostNetwork: true
  containers:
  - name: game-server
    image: daniel840829/gameplayserver:circleci-latest
    imagePullPolicy: Always
    env:
      - name: CLIENT_TO_GAME_PORT
        valueFrom:
          fieldRef:
            fieldPath: metadata.labels['clientToGamePort']
      - name: AGENT_TO_GAME_PORT
        valueFrom:
          fieldRef:
            fieldPath: metadata.labels['agentToGamePort']
      - name: SERVER_TYPE
        valueFrom:
            fieldRef:
              fieldPath: metadata.labels['type']
      - name: ID
        valueFrom:
            fieldRef:
              fieldPath: metadata.labels['id']
      - name: CLIENT_TO_AGENT_PORT
        valueFrom:
          fieldRef:
            fieldPath: metadata.labels['clientToAgentPort']
      - name: 
        valueFrom:
        secretKeyRef:
          name: demo-secret-from-yaml
          key: password
  